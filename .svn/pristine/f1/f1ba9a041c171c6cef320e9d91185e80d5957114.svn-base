//
//  RoleList.h
//  fancyHeart
//
//  Created by doteyplay on 14-8-12.
//
//

#ifndef __fancyHeart__RoleList__
#define __fancyHeart__RoleList__

#include <iostream>
#include "cocos2d.h"
#include "Manager.h"
#include "BaseUI.h"
#include "RotateList.h"
#include "XRole.h"
//#include "XItem.h"
#include "Role.h"
#include "XRoleData.h"

using namespace ui;
using namespace cocos2d;
using namespace cocostudio;

class RoleList:public BaseUI
{
public:
	static RoleList* create();
	virtual bool init(std::string fileName);
	virtual void onEnter();
	virtual void onExit();
	//virtual void onDlgClose(std::string data);

private:
	void initNetEvent();
	void touchEvent(Ref *pSender, TouchEventType type);

private: //私有属性
 	BaseUI* preUI;
    RotateList* rotateList;
    void rotateListCallback(RotateList::EventType type,Widget*item,int index);
    Slider* slider;
//    void setItemData(Widget*item,PNpc itemData,int index);
    void setItemData(Widget*item,rapidjson::Value &itemData,int index);
    std::vector<Widget*> stars;//星级
//    PNpc middleItemData;//当前处于中间的角色信息
    rapidjson::Value middleItemData;
    void setBottomData();
    Widget* progress;
    Button* btnCall;
    Widget* middleItem;//中间位置的item
    void showRolePanel();
    std::vector<rapidjson::Value*> listDatas;//列表数据
    std::vector<PNpc>listDatas1;
    std::vector<int> listIds;//id列表
    void setDataOrder();
    Widget* currentCalledItem;
    

};
#endif /* defined(__fancyHeart__RoleList__) */
