//
//  FightMgr.cpp
//  fancyHeart
//
//  Created by 秦亮亮 on 14-5-15.
//
//

#include "FightMgr.h"
static FightMgr* instance=nullptr;

FightMgr* FightMgr::getInstance(){
    if(instance==nullptr){
        instance=new FightMgr();
    }
    return instance;
}

void FightMgr::init(std::vector<int>leftVec,std::vector<int>rightVec)
{
    //初始化角色
    Size winSize=Director::getInstance()->getWinSize();
    
    for (int i=0; i<leftVec.size(); i++)
    {
        MFighter* mf=MFighter::create(i);
        this->leftArr.pushBack(mf);
        Fighter* view=Fighter::create("HeroAnimation","HeroAnimation0", i);

        view->setPosition(Point(-70*i,winSize.height/2+(i%2?-40:40)));
        this->view->addChild(view,i);
        
        mf->view=view;
        mf->view->delegate=mf;
        mf->start();
    }
    for(int i=0;i<rightVec.size();i++)
    {
        MFighter* mf=MFighter::create(i+5);
        this->rightArr.pushBack(mf);
        Fighter* view=Fighter::create("HeroAnimation", "HeroAnimation0", i+5);
        view->setPosition(Point(winSize.width+70*i,winSize.height/2+(i%2?-40:40)));
        this->view->addChild(view,i);
        mf->view=view;
        mf->view->delegate=mf;
        mf->start();
    }
}

void FightMgr::init(rapidjson::Value& data)
{
    
}

void FightMgr::onFrame(float dt)
{
   
}

void FightMgr::clear()
{
    this->leftArr.clear();
    this->rightArr.clear();
}