2014-03-25 15:46:59

参数：10018
消息：BattleStepEndNotifyMessage: commandId=9
java.lang.NullPointerException
	at com.pwrd.core.messageagent.TransferAgent.sendMessage(TransferAgent.java:43)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.sendMessage(BattlePlayerStatus.java:875)
	at com.pwrd.game.domain.battle.BattleField.broadCastAllMessage(BattleField.java:135)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.sendEnterViewMessage(BattlePlayerStatus.java:745)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.addNpc(BattlePlayerStatus.java:728)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.summon(BattlePlayerStatus.java:682)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.useCard(BattlePlayerStatus.java:780)
	at com.pwrd.game.domain.pve.AIUseCardCommand.execute(AIUseCardCommand.java:44)
	at com.pwrd.game.service.bo.battle.BattleService.endStep(BattleService.java:167)
	at com.pwrd.game.action.battle.BattleStepEndNotifyMessageAction.processMessage(BattleStepEndNotifyMessageAction.java:17)
	at com.pwrd.game.action.battle.BattleStepEndNotifyMessageAction.processMessage(BattleStepEndNotifyMessageAction.java:1)
	at com.pwrd.game.action.common.WorldServerPipeline.dispatchAction(WorldServerPipeline.java:58)
	at com.pwrd.core.bhns.AbstractSimpleService.messageReceived(AbstractSimpleService.java:372)
	at com.pwrd.game.action.common.GatewayServerPipeline.dispatchAction(GatewayServerPipeline.java:75)
	at com.pwrd.net.protocol.DefaultSessionHandler.messageReceived(DefaultSessionHandler.java:53)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain$TailFilter.messageReceived(DefaultIoFilterChain.java:722)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain.access$1200(DefaultIoFilterChain.java:48)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain$EntryImpl$1.messageReceived(DefaultIoFilterChain.java:802)
	at org.apache.mina.core.filterchain.IoFilterEvent.fire(IoFilterEvent.java:59)
	at org.apache.mina.core.session.IoEvent.run(IoEvent.java:64)
	at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.runTask(OrderedThreadPoolExecutor.java:737)
	at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.runTasks(OrderedThreadPoolExecutor.java:729)
	at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.run(OrderedThreadPoolExecutor.java:667)
	at java.lang.Thread.run(Thread.java:662)
2014-03-25 17:51:39
Index: 1, Size: 0
参数：100001
消息：BattleUseCardMessage: commandId=19
java.lang.IndexOutOfBoundsException: Index: 1, Size: 0
	at java.util.ArrayList.add(ArrayList.java:367)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.addNpc(BattlePlayerStatus.java:712)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.summon(BattlePlayerStatus.java:687)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.useCard(BattlePlayerStatus.java:785)
	at com.pwrd.game.service.bo.battle.BattleService.useCard(BattleService.java:206)
	at com.pwrd.game.action.battle.BattleUseCardMessageAction.processMessage(BattleUseCardMessageAction.java:19)
	at com.pwrd.game.action.battle.BattleUseCardMessageAction.processMessage(BattleUseCardMessageAction.java:1)
	at com.pwrd.game.action.common.WorldServerPipeline.dispatchAction(WorldServerPipeline.java:58)
	at com.pwrd.core.bhns.AbstractSimpleService.messageReceived(AbstractSimpleService.java:372)
	at com.pwrd.game.action.common.GatewayServerPipeline.dispatchAction(GatewayServerPipeline.java:75)
	at com.pwrd.net.protocol.DefaultSessionHandler.messageReceived(DefaultSessionHandler.java:53)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain$TailFilter.messageReceived(DefaultIoFilterChain.java:722)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain.access$1200(DefaultIoFilterChain.java:48)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain$EntryImpl$1.messageReceived(DefaultIoFilterChain.java:802)
	at org.apache.mina.core.filterchain.IoFilterEvent.fire(IoFilterEvent.java:59)
	at org.apache.mina.core.session.IoEvent.run(IoEvent.java:64)
	at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.runTask(OrderedThreadPoolExecutor.java:737)
	at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.runTasks(OrderedThreadPoolExecutor.java:729)
	at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.run(OrderedThreadPoolExecutor.java:667)
	at java.lang.Thread.run(Thread.java:662)
2014-03-25 20:08:47
Index: 1, Size: 0
参数：100001
消息：BattleUseCardMessage: commandId=19
java.lang.IndexOutOfBoundsException: Index: 1, Size: 0
	at java.util.ArrayList.add(ArrayList.java:367)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.addNpc(BattlePlayerStatus.java:711)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.summon(BattlePlayerStatus.java:684)
	at com.pwrd.game.domain.battle.BattlePlayerStatus.useCard(BattlePlayerStatus.java:784)
	at com.pwrd.game.service.bo.battle.BattleService.useCard(BattleService.java:206)
	at com.pwrd.game.action.battle.BattleUseCardMessageAction.processMessage(BattleUseCardMessageAction.java:19)
	at com.pwrd.game.action.battle.BattleUseCardMessageAction.processMessage(BattleUseCardMessageAction.java:1)
	at com.pwrd.game.action.common.WorldServerPipeline.dispatchAction(WorldServerPipeline.java:58)
	at com.pwrd.core.bhns.AbstractSimpleService.messageReceived(AbstractSimpleService.java:372)
	at com.pwrd.game.action.common.GatewayServerPipeline.dispatchAction(GatewayServerPipeline.java:75)
	at com.pwrd.net.protocol.DefaultSessionHandler.messageReceived(DefaultSessionHandler.java:53)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain$TailFilter.messageReceived(DefaultIoFilterChain.java:722)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain.access$1200(DefaultIoFilterChain.java:48)
	at org.apache.mina.core.filterchain.DefaultIoFilterChain$EntryImpl$1.messageReceived(DefaultIoFilterChain.java:802)
	at org.apache.mina.core.filterchain.IoFilterEvent.fire(IoFilterEvent.java:59)
	at org.apache.mina.core.session.IoEvent.run(IoEvent.java:64)
	at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.runTask(OrderedThreadPoolExecutor.java:737)
	at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.runTasks(OrderedThreadPoolExecutor.java:729)
	at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.run(OrderedThreadPoolExecutor.java:667)
	at java.lang.Thread.run(Thread.java:662)
